# Нагрузочное тестирование

## Запуск
1) Запустить контейнер веб/бд с NODE_ENV=test
2) python3 init_temp_users.py
3) docker build -t mongo-locust .
4) docker run --network host mongo-locust
## Результаты нагрузочного тестирования
### Предусловия
1) Каждый пользователь имеет свою базу с 5-ю коллекциями
2) В каждой коллекции проинициализированы 100 документов
3) Всего 250 пользователей
4) Контейнер с веб/бд задействует максимум 2 логических ядра процессора
5) Тестирование проводилось 30 минут
### Описание выполняемых тестов
1) /login - авторизация пользователя
2) Aggregate heavy - Запрос списка документов в базе (агрегация с сортировкой и группировкой)
3) Regex query - Запрос списка документов в базе (поиск по регулярному выражению)
4) Update document - Обновление документа
5) Delete document - Удаление документа
6) View collections - Просмотр списка коллекций
7) Create collection - Создание коллекции
8) Delete collection - Удаление коллекции
## Результаты тестирования
1. Усредненные данные из отчета:
2. Percentile 99:
3. CPU (2 ядра, 27 гб RAM максимум) метрики:
4. График CPU:
5. Отчет locust приложен в этой же папке (mongo_locust_report.pdf)
